{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///home/newking/Desktop/Global/projects/ProdfestHackathon/hybrid-agent/frontend/app/Login/page.jsx"],"sourcesContent":["'use client';\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport toast from 'react-hot-toast';\nimport { FiMail, FiLock } from 'react-icons/fi';\n\nconst LoginPage = () => {\n  const router = useRouter();\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    // If user is already logged in, redirect to their profile\n    if (localStorage.getItem('currentUser')) {\n      toast.success('You are already logged in!');\n      router.push('/Profile');\n    }\n  }, [router]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n\n    const loginPromise = new Promise((resolve, reject) => {\n      setTimeout(() => {\n        // First, try the single `currentUser` entry (used by Registration)\n        const storedCurrent = localStorage.getItem('currentUser');\n        if (storedCurrent) {\n          try {\n            const userData = JSON.parse(storedCurrent);\n            if (userData.email === formData.email && userData.password === formData.password) {\n              return resolve('Login successful!');\n            }\n          } catch (e) {\n            // fall through to check `users` array\n          }\n        }\n\n        // Next, support older/alternate format where multiple users are stored under `users`\n        const storedUsers = localStorage.getItem('users');\n        if (storedUsers) {\n          try {\n            const usersArr = JSON.parse(storedUsers);\n            if (Array.isArray(usersArr)) {\n              const matched = usersArr.find((u) => u.email === formData.email && u.password === formData.password);\n              if (matched) {\n                // promote matched user to `currentUser` so app behaves consistently\n                localStorage.setItem('currentUser', JSON.stringify(matched));\n                return resolve('Login successful!');\n              }\n            }\n            return reject(new Error('Invalid email or password.'));\n          } catch (err) {\n            return reject(new Error('Stored users data is corrupted. Please register again.'));\n          }\n        }\n\n        // No user data found\n        return reject(new Error('No user registered. Please sign up first.'));\n      }, 1500);\n    });\n\n    toast.promise(loginPromise, {\n      loading: 'Logging in...',\n      success: (message) => {\n        setIsSubmitting(false);\n        // show a success toast explicitly with custom duration\n        toast.success(message, { duration: 1500 });\n        // notify other components (Navbar) that auth changed\n        try { window.dispatchEvent(new Event('authChanged')); } catch (e) {}\n        // wait for the toast to be visible, then navigate\n        setTimeout(() => router.push('/Profile'), 700);\n        return <b>{message}</b>;\n      },\n      error: (err) => {\n        setIsSubmitting(false);\n        return <b>{err.toString()}</b>;\n      },\n    });\n  };\n\n  return (\n    <div\n      className=\"min-h-screen flex items-center justify-center bg-black bg-cover bg-center py-12 px-4 sm:px-6 lg:px-8\"\n      style={{ backgroundImage: `url('/bgttt.avif')` }}\n    >\n      \n      <div className=\"w-full max-w-md bg-black rounded-2xl shadow-2xl p-8 sm:p-10 border border-gray-800\">\n        <h3 className=\"text-2xl md:text-3xl text-center font-bold text-teal-700 mb-6\">Welcome Back</h3>\n        <p className=\"text-center text-sm text-gray-400 mb-6\">Sign in to continue to your account.</p>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div>\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-400\">Email</label>\n            <div className=\"mt-1 relative\">\n              <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-teal-600\"><FiMail /></span>\n              <input id=\"email\" name=\"email\" type=\"email\" value={formData.email} onChange={handleChange} required className='w-full pl-10 border border-gray-600 text-gray-200 outline-none p-3 rounded-lg bg-black' />\n            </div>\n          </div>\n\n          <div>\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-400\">Password</label>\n            <div className=\"mt-1 relative\">\n              <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-teal-600\"><FiLock /></span>\n              <input id=\"password\" name=\"password\" type=\"password\" value={formData.password} onChange={handleChange} required className='w-full pl-10 border border-gray-600 text-gray-200 outline-none p-3 rounded-lg bg-black' />\n            </div>\n          </div>\n\n          <div>\n            <button type=\"submit\" disabled={isSubmitting} className='w-full inline-flex items-center justify-center bg-teal-800 hover:bg-teal-700 focus:ring-4 focus:outline-none focus:ring-teal-800 text-lg text-white font-semibold p-3 rounded-lg disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors'>\n              {isSubmitting ? 'Signing In...' : 'Sign In'}\n            </button>\n          </div>\n\n          <p className=\"mt-4 text-center text-sm text-gray-400\">Don't have an account? <a className='text-teal-700 underline' href=\"/Registration\">Register here</a></p>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;"],"names":[],"mappings":"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","debugId":null}}]
}